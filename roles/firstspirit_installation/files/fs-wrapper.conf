#encoding=UTF-8
#*****************************************************************************
# FirstSpirit-Server Java-Wrapper Properties
# Documentation available in FirstSpirit Administration Manual
# and http://wrapper.tanukisoftware.com/doc/english/properties.html
#*****************************************************************************

# Language parameters
wrapper.lang.folder=../conf
wrapper.lang.domain=fs-wrapper

# Java command (JDK needed, not JRE)
# absolute path or just "java" when environment variable PATH is set correctly
wrapper.java.command=/usr/lib/jvm/java-11-openjdk

# Maximum Java Heap Size
#   set in MByte with maxmemory=MBYTESNUMBER
#   set in percent of total physical RAM with maxmemory.percent=PERCENTNUMBER
wrapper.java.maxmemory=4000

# Initial Java Heap Size.
# set to same value as wrapper.java.maxmemory to prevent unnecessary Full GCs
wrapper.java.initmemory=4000

# Supported Java Versions
wrapper.java.version.min=8
wrapper.java.version.fallback=11

# Java parameters.
# Gaps in parameter enumeration are allowed since FirstSpirit 5 / Wrapper 3.3.6.
wrapper.java.additional.1=-Djava.awt.headless=true
wrapper.java.additional.2=-Djava.security.auth.login.config=conf/fs-jaas.conf
wrapper.java.additional.3=-Djava.security.policy=conf/fs-server.policy
wrapper.java.additional.4=-Dfile.encoding=UTF-8
wrapper.java.additional.5=-Xshare:off
wrapper.java.additional.6=-Djava.net.preferIPv4Stack=true
wrapper.java.additional.7=-Djava.io.tmpdir=work

# parameter is automatically set by 64bit JVM
# explicitly set as needed by Berkeley-DB:
wrapper.java.additional.8=-XX:+UseCompressedOops

wrapper.java.additional.9=
wrapper.java.additional.10=
wrapper.java.additional.11=
wrapper.java.additional.12=
wrapper.java.additional.13=
wrapper.java.additional.14=
wrapper.java.additional.15=
wrapper.java.additional.16=
wrapper.java.additional.17=
wrapper.java.additional.18=
wrapper.java.additional.19=

# Java parameters for garbage collection
wrapper.java.additional.20=-XX:InitialCodeCacheSize=128M
wrapper.java.additional.21=-XX:ReservedCodeCacheSize=128M
wrapper.java.additional.22=-XX:SoftRefLRUPolicyMSPerMB=1
wrapper.java.additional.23=-XX:+DisableExplicitGC
wrapper.java.additional.24=-XX:-UseLargePages
wrapper.java.additional.25=-Djava.rmi.dgc.leaseValue=3600000
wrapper.java.additional.26=
wrapper.java.additional.27=
wrapper.java.additional.28=
wrapper.java.additional.29=
wrapper.java.additional.30=
wrapper.java.additional.31=
wrapper.java.additional.32=
wrapper.java.additional.33=
wrapper.java.additional.34=
wrapper.java.additional.35=
wrapper.java.additional.36=
wrapper.java.additional.37=
wrapper.java.additional.38=
wrapper.java.additional.39=

# Java 8 parameters
# set -Xmn to 40% of wrapper.java.maxmemory
wrapper.java.additional.40=-Xmn1600M
wrapper.java.additional.40.java_version.max=8
wrapper.java.additional.41=-XX:SurvivorRatio=1
wrapper.java.additional.41.java_version.max=8
wrapper.java.additional.42=-XX:+NeverTenure
wrapper.java.additional.42.java_version.max=8
wrapper.java.additional.43=-XX:+UseConcMarkSweepGC
wrapper.java.additional.43.java_version.max=8
wrapper.java.additional.44=-XX:+UseParNewGC
wrapper.java.additional.44.java_version.max=8
wrapper.java.additional.45=-XX:+CMSParallelRemarkEnabled
wrapper.java.additional.45.java_version.max=8
wrapper.java.additional.46=-XX:+CMSClassUnloadingEnabled
wrapper.java.additional.46.java_version.max=8
wrapper.java.additional.47=-XX:+PrintTenuringDistribution
wrapper.java.additional.47.java_version.max=8
wrapper.java.additional.48=-XX:+PrintReferenceGC
wrapper.java.additional.48.java_version.max=8
wrapper.java.additional.49=-XX:+PrintGCApplicationStoppedTime
wrapper.java.additional.49.java_version.max=8
# - Garbage Collector Log
#   Logfile fs-gc.log is automatically rotated by FirstSpirit.
wrapper.java.additional.50=-verbose:gc
wrapper.java.additional.50.java_version.max=8
wrapper.java.additional.51=-XX:+PrintGCTimeStamps
wrapper.java.additional.51.java_version.max=8
wrapper.java.additional.52=-XX:+PrintGCDetails
wrapper.java.additional.52.java_version.max=8
wrapper.java.additional.53=-XX:+PrintGCDateStamps
wrapper.java.additional.53.java_version.max=8
wrapper.java.additional.54=-Xloggc:log/fs-gc.log
wrapper.java.additional.54.java_version.max=8
wrapper.java.additional.55=-XX:+UseGCLogFileRotation
wrapper.java.additional.55.java_version.max=8
wrapper.java.additional.56=-XX:GCLogFileSize=10M
wrapper.java.additional.56.java_version.max=8
wrapper.java.additional.57=-XX:NumberOfGCLogFiles=9
wrapper.java.additional.57.java_version.max=8
wrapper.java.additional.58=
wrapper.java.additional.59=

# Java 9+ parameters
wrapper.java.additional.60=--add-exports=java.base/sun.security.util=ALL-UNNAMED
wrapper.java.additional.60.java_version.min=9
wrapper.java.additional.61=--add-exports=java.desktop/com.sun.awt=ALL-UNNAMED
wrapper.java.additional.61.java_version.min=9
wrapper.java.additional.61.java_version.max=11
wrapper.java.additional.62=--add-exports=java.desktop/sun.awt.image=ALL-UNNAMED
wrapper.java.additional.62.java_version.min=9
wrapper.java.additional.63=--illegal-access=permit
wrapper.java.additional.63.java_version.min=9
wrapper.java.additional.64=--add-opens=java.jnlp/javax.jnlp=ALL-UNNAMED
wrapper.java.additional.64.java_version.min=9
wrapper.java.additional.64.java_version.max=10
wrapper.java.additional.65=--add-modules=java.activation
wrapper.java.additional.65.java_version.min=10
wrapper.java.additional.65.java_version.max=10
# - Garbage Collector Log
#   Logfile fs-gc.log is automatically rotated by FirstSpirit.
wrapper.java.additional.66=-Xlog:gc*,gc+age=trace,safepoint,heap*,phases*:log/fs-gc.log
wrapper.java.additional.66.java_version.min=9
wrapper.java.additional.67=
wrapper.java.additional.68=
wrapper.java.additional.69=
wrapper.java.additional.70=
wrapper.java.additional.71=
wrapper.java.additional.72=
wrapper.java.additional.73=
wrapper.java.additional.74=
wrapper.java.additional.75=
wrapper.java.additional.76=
wrapper.java.additional.77=
wrapper.java.additional.78=
wrapper.java.additional.79=

# Custom Java parameters
wrapper.java.additional.80=
wrapper.java.additional.81=
wrapper.java.additional.82=
wrapper.java.additional.83=
wrapper.java.additional.84=
wrapper.java.additional.85=
wrapper.java.additional.86=
wrapper.java.additional.87=
wrapper.java.additional.88=
wrapper.java.additional.89=
wrapper.java.additional.90=
wrapper.java.additional.91=
wrapper.java.additional.92=
wrapper.java.additional.93=
wrapper.java.additional.94=
wrapper.java.additional.95=
wrapper.java.additional.96=
wrapper.java.additional.97=
wrapper.java.additional.98=
wrapper.java.additional.99=

# Enable JMX-Connector via fs-server.conf, parameter jmx.port.
# For more JMX parameters see FirstSpirit Administration Manual.

# Timeout parameters in seconds for controlling the Java process.
# Before changing read Wrapper documentation as all timeout parameters
# are related to each other.
# ping.timeout disabled to allow enough time for large heapdumps,
# can be set to 300 if automatic restarts in case of JVM deadlock
# is needed.
wrapper.startup.timeout=30
wrapper.shutdown.timeout=180
wrapper.jvm_exit.timeout=30
wrapper.cpu.timeout=20
wrapper.ping.timeout=0
wrapper.timer_slow_threshold=3
wrapper.successful_invocation_time=35

# Unix: umask for creating files
#   0022 allow read access to everyone
#   0027 prevent access by others
#   0077 prevent access by group members or others
wrapper.umask=0027

# set TRUE on Solaris with SMF, FALSE on all other systems
wrapper.disable_restarts=FALSE

# disable automatic restarts after Java-VM failures
wrapper.disable_restarts.automatic=FALSE

#*****************************************************************************
# stdout/stderr-logging (log/fs-wrapper.log)
# for configuration of log/fs-server.log edit conf/fs-logging.conf
#*****************************************************************************

# Log Level for log file output.  (DEBUG, INFO, STATUS, ERROR, FATAL, NONE)
wrapper.logfile.loglevel=INFO

# Log Level for console mode. (DEBUG, INFO, STATUS, ERROR, FATAL, NONE)
wrapper.console.loglevel=INFO

# Show Java options in fs-wrapper.log
wrapper.java.command.loglevel=INFO

# Format of output for the console.  (See docs for formats)
wrapper.console.format=PM

# Log file to use for wrapper output logging.
wrapper.logfile=log/fs-wrapper.log

# Format of output for the log file.  (See docs for formats)
wrapper.logfile.format=LPTM

# Maximum size that the log file will be allowed to grow to before
# the log is rolled. Size is specified in bytes.  The default value
# of 0, disables log rolling.  May abbreviate with the 'k' (kb) or
#'m' (mb) suffix.  For example: 10m = 10 megabytes.
wrapper.logfile.maxsize=10m

# Maximum number of rolled log files which will be allowed before old
#  files are deleted.  The default value of 0 implies no limit.
wrapper.logfile.maxfiles=9

# Unix: Log Level for syslog (DEBUG, INFO, STATUS, ERROR, FATAL, NONE)
wrapper.syslog.loglevel=NONE

# Unix: Log Level for sys/event log output.  (USER, LOCAL0-7)
wrapper.syslog.facility=USER

# Unix: Identity entry for syslog
wrapper.syslog.ident=FirstSpirit


#*****************************************************************************
# Windows Service
#*****************************************************************************

# WARNING - Do not modify any of these properties when an application
#  using this configuration file has been installed as a service.
#  Please uninstall the service before modifying this section.  The
#  service can then be reinstalled by starting the FIRSTspirit Installer.

# Name of the service
wrapper.ntservice.name=FirstSpiritServer5

# Display name of the service
wrapper.ntservice.displayname=FirstSpirit 5.2

# Description of the service
wrapper.ntservice.description=FirstSpirit Content Management Server

# Service dependencies.  Add dependencies as needed starting from 1
wrapper.ntservice.dependency.1=

# Mode in which the service is installed.  AUTO_START or DEMAND_START
wrapper.ntservice.starttype=AUTO_START

# Allow the service to interact with the desktop.
wrapper.ntservice.interactive=false

# Use a console window. This is needed as workaround for Threaddumps
# on Windows. The window will only be visible if wrapper.ntservice.interactive=true
wrapper.ntservice.console=true


#*****************************************************************************
# Do not change parameters below as FirstSpirit depends on them
#*****************************************************************************

# Directory to launch FirstSpirit-Server relative to wrapper(.exe)
wrapper.working.dir=../

# Application parameters.  Add parameters as needed starting from 1
#wrapper.app.parameter.1=

# Java Classpath (includes wrapper.jar)
wrapper.java.classpath.1=shared/classes
wrapper.java.classpath.2=shared/lib/*.jar
wrapper.java.classpath.3=shared/lib/*.zip
wrapper.java.classpath.4=server/classes
wrapper.java.classpath.5=server/lib/*.jar

# Java Library Path (includes libwrapper.so or wrapper.dll)
wrapper.java.library.path.1=shared/lib
wrapper.java.library.path.2=server/lib

# FirstSpirit-Server Main class
wrapper.java.mainclass=de.espirit.firstspirit.server.CMSServer

# Java Service Wrapper is licensed for redistribution by e-Spirit AG

# DO NOT REMOVE OR MODIFY THE FOLLOWING '#include' LINE!
#include ../conf/fs-wrapper-license.conf

# Do not restart Java VM on failure
wrapper.max_failed_invocations=1

# only one instance of this server with name wrapper.ntservice.name is allowed
wrapper.single_invocation=TRUE

# write thread dump if server failed to exit
wrapper.request_thread_dump_on_failed_jvm_exit=TRUE

# return codes used by Webmonitor
wrapper.on_exit.default=SHUTDOWN
# normal restart:
wrapper.on_exit.23=RESTART
# web-update and restart:
wrapper.on_exit.42=RESTART

# reload this file on Wrapper restart
wrapper.restart.reload_configuration=TRUE

# File which will be monitored every 5 seconds for wrapper commands
wrapper.commandfile=conf/fs-control
wrapper.command.poll_interval=5

# Title to use when running in console mode
wrapper.console.title=FirstSpirit

# no continuous enumeration is needed for wrapper.java.additional.<n>
# and other numbered parameters!
wrapper.ignore_sequence_gaps=true

# set -d64 automatically on operating systems where required
wrapper.java.additional.auto_bits=false

# Server update include file
#include ../server/update/fs-update.conf

#*****************************************************************************
# end of file
#*****************************************************************************
